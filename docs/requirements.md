# 要件定義

このドキュメントでは、テニススクール予約管理アプリで管理すべき概念と各概念ごとの要件をまとめています。

---

## 1. 会員（ユーザ）
- 月額会員として登録・退会ができる
- レベル情報を持つ（初級～上級）
- 予約枠の残数を管理
- 入館登録により「受講済」として記録
- 欠席登録により予約枠を獲得

## 2. 月額プラン（会員種別）
- 標準プラン：毎週決まった時間にレッスン（最大月4回）
- 割引プラン：毎週受講はできないが、溜まった予約枠で予約可能
- プラン変更・退会フローをサポート

## 3. コース
- 固定の曜日・時間・コート・コーチで設定
- 月4回までの開催（5回目は設定しない）
- レベルに紐づく（同一レベルのコースとして扱う）
- 定員を設定し、超過予約を防止
- コース登録・編集機能を提供

## 4. レベル
- 初級～上級まで段階的に分類
- 会員やコースと紐付け
- 予約や振替時は同一レベル内のみ許可

## 5. コーチ
- 少なくとも1名をコースに割り当て
- コーチ自身または管理者がコースを登録・中止できる
- コーチ情報（担当コース、権限など）を管理

## 6. コート
- 複数あるコートをリソースとして扱う
- コースの時間帯と重複しないよう管理
- コート登録・編集機能を提供

## 7. 予約枠
- 毎月付与される上限回数（最大4枠）を管理
- 欠席登録時・コース中止時に枠を還元
- 割引プラン向けに繰り越しルールを適用

## 8. 予約
- 空き状況を確認して同一レベルのコースを予約
- 定員チェック・トランザクションで同時予約を防止
- 予約キャンセル・変更機能を提供

## 9. 参加記録（入館）
- レッスン受講時に「入館登録」を行い出席を記録
- 参加ログを保持し、統計出力に活用

## 10. 欠席登録
- 事前欠席登録で予約枠を返却
- 登録締切時間を設定

## 11. コース中止
- 雨天などでコースを中止
- 中止登録者全員へ予約枠を還元
- 通知（メール／LINE等）機能をトリガー

## 12. 管理者機能
- コース・コーチ・コート・会員のCRUD操作
- 中止登録・欠席登録の承認フロー
- レポート出力（出席率・欠席率・予約状況など）

